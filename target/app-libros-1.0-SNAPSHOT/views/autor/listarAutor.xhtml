<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./../../MainTemplate/mainTemplate.xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:define name="content">
        <p:panel header="Lista de autores">
            <h:form>
                <p:dataTable var="autor" value="#{cautor.autores}">
                    <p:column headerText="Nombre completo">
                        <h:outputText value="#{autor.nombre} #{autor.apellido}" />
                    </p:column>

                    <p:column headerText="Fecha de nacimiento">
                        <h:outputText value="#{autor.fechaNacimiento}" />
                    </p:column>

                    <p:column headerText="Pais">
                        <h:outputText value="#{autor.pais}" />
                    </p:column>

                    <p:column headerText="Opciones">
                        <p:commandButton action="#" styleClass="ui-button-warning" icon="pi pi-fw pi-pencil" oncomplete="PF('dglModificar').show();"/>&nbsp;
                        <p:commandButton styleClass="ui-button-danger" icon="pi pi-fw pi-trash" action="#" oncomplete="PF('confirmación').show();"/>
                    </p:column>

                </p:dataTable>
            </h:form>
        </p:panel>

        <!-- Dialogo para connfirmar si se desea eliminar un registro -->
        <p:confirmDialog message="¿Quieres eliminar el registro?" header="Eliminar" widgetVar="confirmación">
            <h:form id="messajeForm">
                <p:commandButton id="confirm" value="Si"   
                                 styleClass="ui-button-danger"
                                 action="#" oncomplete="PF('confirmación').hide();" >
                </p:commandButton>
                <p:commandButton id="confirme" value="No" onclick="PF('confirmación').hide();"
                                 type="button">
                </p:commandButton>
            </h:form>
        </p:confirmDialog>

        <!-- Formulario para modificar un registro -->
        <h:form id="updateform">
            <p:dialog style="width: 1080px;" id="dgl" widgetVar="dglModificar" header="Modificar">
                <p:panel header="Modificar">
                    <p:panelGrid style="sinBorde">
                        <p:row style="display: none;">
                            <p:column>
                                <p:outputLabel for="id" value="Id"/>
                            </p:column>
                            <p:column>
                                <h:outputText id="id" value="#"/>
                            </p:column>
                        </p:row> 
                        <p:row>
                            <p:column>
                                <p:outputLabel for="nombre" value="Nombre"/>
                            </p:column>
                            <p:column>
                                <p:inputText value="#" size="40" required="true"
                                             style="margin-left: -4px" id="nombre">
                                    <f:validateLength minimum="3"  maximum="100"/>   
                                </p:inputText>                                
                            </p:column>
                        </p:row>
                        <p:row>
                            <p:column>
                                <p:outputLabel for="apellido" value="Apellido"/>
                            </p:column>
                            <p:column>
                                <p:inputText value="#" size="40" required="true"
                                             style="margin-left: -4px" id="apellido">
                                    <f:validateLength minimum="3"  maximum="100"/>   
                                </p:inputText>                                
                            </p:column>
                        </p:row>
                        <p:row>
                            <p:column>
                                <p:outputLabel for="fecha" value="Fecha"/>
                            </p:column>
                            <p:column>
                                <p:inputText value="#" size="40" required="true"
                                             style="margin-left: -4px" id="fecha">
                                    <f:validateLength minimum="3"  maximum="100"/>   
                                </p:inputText>                                
                            </p:column>
                        </p:row>
                        <p:row>
                            <p:column>
                                <p:outputLabel for="pais" value="Pais"/>
                            </p:column>
                            <p:column>
                                <p:inputText value="#" size="40" required="true"
                                             style="margin-left: -4px" id="pais">
                                    <f:validateLength minimum="3"  maximum="100"/>   
                                </p:inputText>                                
                            </p:column>
                        </p:row>
                    </p:panelGrid>
                    <f:facet name="footer">
                        <p:column style="align-items: center;">
                            <p:commandButton value="Cancelar" styleClass="ui-button-warning"
                                             icon="pi pi-fw pi-times" style="margin-left: 10px" 
                                             action="listarAutor.xhtml?faces-redirect=true"
                                             process="@this">                            
                            </p:commandButton>
                            &nbsp;
                            <p:commandButton value="Modificar" icon="pi pi-fw pi-save" style="margin: 0" 
                                             actionListener="#"
                                             action="listarAutor.xhtml?faces-redirect=true">
                            </p:commandButton>
                        </p:column>
                    </f:facet>
                </p:panel>
            </p:dialog>
        </h:form>

    </ui:define>
</ui:composition>
